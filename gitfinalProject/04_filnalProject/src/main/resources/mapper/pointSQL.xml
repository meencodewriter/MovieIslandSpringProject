<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
 <mapper namespace="point">

<!-- 포인트이용내역 -->
<select id="totalPoint" parameterType="m" resultType="p">
	select 
		point_no as pointNo ,
		member_no as memberNo ,
		sum(point_amount) as pointAmount ,
		point_status as pointStatus ,
		point_detail as pointDetail ,
		point_date as pointDate
	from point_tbl 
	where member_no = #{memberNo};
</select>

<!-- 포인트 사용 -->
<insert id="usePoint" parameterType="_int" >
	insert into point_tbl values (point_no_seq.nextval , #{memberNo}, -#{_parameter}, '사용', '사용', to_char(sysdate,'yyyy-mm-dd'));
</insert>

<!-- 포인트 적립 -->
<insert id="savePoint" parameterType="_int" >
	insert into point_tbl values (point_no_seq.nextval , #{memberNo}, #{_parameter}, '적립', '적립', to_char(sysdate,'yyyy-mm-dd'));
</insert>

</mapper>